// Generated by CoffeeScript 1.3.3
(function() {
  var channel, publish, subscription;

  channel = postal.channel({
    channel: 'chat',
    topic: 'message'
  });

  subscription = channel.subscribe(function(data, envelope) {
    return $('#display').append("<p>" + data.text + "</p>");
  });

  publish = function() {
    channel.publish({
      text: $('#input-text').val()
    });
    return $('#input-text').val('');
  };

  $(function() {
    $('#send').click(function() {
      return publish();
    });
    return $(window).keypress(function(e) {
      if (e.which === 13) {
        publish();
        return e.preventDefault();
      }
    });
  });

}).call(this);
